3DSceneReconstructionandVirtualTour
CS436:ComputerVisionFundamentals
Overview
ThisprojectchallengesyoutobuildacompleteStructurefromMotion(SfM)andvisualizationpipeline,
inspiredbyapplicationslikeMatterportorMicrosoft'soriginalPhotosynth.Yourgoalistotakeacollec-
tionof2Dphotographsofastaticscene,capturedfromvariousviewpoints,andtransformthemintoan
interactive3Dexperience.Thenalapplicationwillconsistoftwoprimaryoutputs:asparse3Dpoint
cloudrepresentingthegeometryofthescene,andavirtualtourviewerthatallowsausertosmoothly
navigatebetweentheoriginalcameraviewpoints.Thisprojectwillserveasapractical,hands-onimple-
mentationofthecoretheoreticalconceptscoveredinthiscourse,culminatinginavisuallycompelling
andinteractivenalproduct.
Thecoreofthisprojectistocreateasystemthatcandeduce3Dinformationfrom2Dimages.This
isthefundamentalpromiseofmultiviewgeometry.Youwillimplementafull,albeitsimplied,SfM
pipeline.Thisinvolvesdetectingandmatchinginvariantfeaturesacrossmultipleimages,usingepipolar
geometrytorecovertheinitialcameraposesand3Dstructurefromtwoviews,andthenincrementally
addingmoreviewstoexpandthereconstruction.Akeyinsightforthenalvisualizationisthatyouwill
notbecreatingadense,photorealistic3Dmodel.Instead,youwillusetherecoveredsparse3Dpoint
cloudasageometricscaffoldthatenablesnavigationbetweenthehigh-resolution2Dsourceimages,
creatingtheillusionofmovingthrougha3Dspace.
Forreferenceandinspiration,exploresomeexampletourshere:
MPskinShowcase
.
DataCollection
Thesuccessofyourentireprojectdependsonthequalityofyourinputimages.Followtheseinstructions
carefullytocaptureagooddataset.
1.
Chooseasuitablescene.
Thebestscenesarestatic(nothingismoving),well-lit,andrichin
texture.Anobjectonacluttereddesk,abookshelf,orasmallroomwithfurnitureareexcellent
choices.Avoidlarge,blank,texturelesssurfaceslikewhitewalls,andavoidreectiveortranspar-
entsurfaceslikewindowsandmirrors.
2.
Movethecamera,donotjustrotate.
Thisisthemostimportantrule.Toperceivedepth,the
algorithmneedstoseethescenefromdifferentpositions.Thisiscalledparallax.Donotstandin
onespotandsimplyturn.Instead,takeafewstepstothesidebetweeneachshot.Foranobject
onatable,movethecamerainawidearcaroundit.
3.
Ensuresignicantoverlap.
Eachimageshouldoverlapwiththepreviousonebyabout60-80%.
Thismeansalargepartofthesceneinonephotoshouldstillbevisibleinthenext.Thisisessential
forthefeaturematchertondenoughcorrespondingpointstolinktheimagestogether.
4.
Maintainconsistentlighting.
Trytocaptureallyourphotosunderthesamelightingconditions.
Avoidharshshadowsorbrightglare,asthesecanconfusethefeaturedetector.Diffuse,even
lightingisideal.
5.
Capturesharpimages.
Makesureyourphotosareinfocusandfreeofmotionblur.Ifyour
phonecameraallows,useapromodetolockthefocusandexposuresettingssotheydon't
changebetweenshots.Asequenceof15-30imagesisagoodtargetforthisproject.
1
ToolsandLibraries
Forthisproject,itishighlyrecommendedtousePython.Thefollowinglibrarieswillbeessential:

OpenCV:
Forallcorecomputervisiontasks,includingfeaturedetection/matching,epipolarge-
ometry,triangulation,andPnP.

NumPy:
Forallnumericalandmatrixoperations.

Open3D:
Anexcellentlibraryforvisualizinganddebuggingyour3Dpointcloudsateachstage.

Three.js:
Therecommendedlibraryforbuildingthenalinteractiveweb-basedvirtualtour.
ImplementationPhases
Phase1:TheTwo-ViewFoundation
YourrsttaskistobuildthefoundationalblockofanySfMsystembyimplementingatwo-viewrecon-
structionpipeline.Tobegin,youmustcaptureasuitableimagepairthatprovidesparallax;donotsimply
rotatethecamerainonespot,butinsteadphysicallymoveitbetweenshots,suchastakingonelargestep
tothesidewhilekeepingthetargetobjectinframe.Youwillalsoneedtoconstructthecamera's3x3in-
trinsicmatrix,
K
,whichisrequiredforallgeometriccalculations.Youwillapproximateit:assumethe
principalpoint
(
c
x
;c
y
)
istheimagecenterandthefocallengths
(
f
x
;f
y
)
areequaltotheimagewidth.
Withthisdata,youwilldetectandmatchfeaturesbetweenthetwoimagesusingSIFTorORB,ltering
forhigh-qualitymatcheswithLowe'sratiotest.Fromthesematches,youmustestimatethe
Essential
Matrix
,
E
,bypassingyourmatchedpointsandtheintrinsicmatrix
K
tothe`cv2.ndEssentialMat`
functionwithRANSAC.Next,decompose
E
tondthefourpossiblerelativecameraposes(rotation
R
andtranslation
t
)using`cv2.recoverPose`.Yourimplementationmustthentriangulatethematched2D
pointsinto3Dspaceforeachofthefourpossibleposesandperforma
cheiralitycheck
todisambiguate
thepose,selectingthesingle`[Rt]`solutionthatplacesthemajorityoftriangulated3Dpointsinfront
ofbothcameras.Thenaloutputforthisphaseisanotebookthattakestwoimagesandproducesavalid
sparse3Dpointcloud,whichshouldbesavedtoa`.ply`leforviewing.
Phase2:IncrementalSfMandRenement
Withthetwo-viewsystemworking,youwillextendittohandleasequenceofimages.Thegoalof
thisphaseistoincrementallyaddnewviewstotheexistingreconstruction.Foreachnewimage,you
willrstmatchits2Dfeaturesagainstthefeaturesfromthepreviousimagethathavealreadybeen
triangulatedinto3Dmappoints.Thisestablishesasetof2D-3Dcorrespondences.Usingthesecorre-
spondences,youwillcomputetheposeofthenewcamerausinga
Perspective-n-Point(PnP)
algorithm,
using`cv2.solvePnPRansac`foragoodsolution.Oncethenewcameraislocalizedwithintheexisting
map,youwillidentifynewfeaturematchesbetweenitandpreviousviewsandtriangulatethesetocreate
new3Dpoints,thusgrowingthemap.Asyouaddmoreviews,youwillnoticethatsmallerrorsfrom
eachPnPstepaccumulate,causingthereconstructiontodriftorbend.Tocorrectthis,aglobalop-
timizationtechniquecalled
BundleAdjustment
istypicallyused.Thisprocesssimultaneouslyrenes
allcameraposesand3Dpointlocationstominimizetheoverallreprojectionerror,resultinginamuch
moreaccurateandgeometricallyconsistentmodel.
Phase3:TheInteractive'Photosynth'Visualization
Thenalphaseistocreatethevirtualtourapplication.Youwillbuildaviewerthatleveragestherened
cameraposesandthesparsepointcloud.Thevisualizationstartsbydisplayingtherstsourceimage,
asiftheuserislookingthroughthatcamera.Toenablenavigation,youwillconstructa
viewgraph
,
2
wherecameraposesarenodesandedgesconnectcamerasthatsharemanyvisible3Dpoints.Whena
userinteractswiththeview(e.g.,byclicking),yourapplicationwilldeterminethebestnearbycamera
tonavigatetobasedontheviewgraph.Thetransitionbetweenthecurrentcamera'simageandthe
nextcamera'simageshouldbeasmoothanimation.Thisisachievedbyinterpolatingthecamera's3D
position(usinglinearinterpolation,
lerp
)andorientation(usingsphericallinearinterpolation,
slerp
)
fromthestartposetotheendpose,whilesimultaneouslycross-fadingbetweenthetwoimages.During
thisanimatedtransition,youcanrenderthesparsepointcloudtoprovideasenseof3Dmotionand
structure.
CodingPracticesandProjectStructure
Professionalprojectsrequirewell-structuredandmaintainablecode.WhileJupyternotebooksareexcel-
lentforexperimentationandvisualization,theyarenotsuitableforimplementingamulti-stagepipeline.
YouarerequiredtostructureyourmainlogicinPython(
.py
)les.
Anotebookmaybeusedfor
yourweeklysubmissionreportsandforshowingyourresultsforwholeworkingpipeline,butitshould
importandcallfunctionsfromyourstructuredPythoncodebase.
Yourcodeshouldbemodular,withclearandwell-documentedfunctionsforeachmajorstepof
thepipeline(e.g.,
find
matches()
,
estimate
essential
matrix()
,etc.).Properfunction
naming,comments,andlogicalorganizationwillbepartoftheevaluation.
YourGitHubrepositoryshouldreectprofessionalengineeringpractices.Itmustcontainadetailed
README.md
lewithclear,step-by-stepinstructionsonhowto:

Setuptheenvironmentandinstalldependencies,

Runyourcodeandreproduceyourresults,

Visualizetheoutputsofeachstage(featurematching,reconstruction,andvisualization).
WeeklyMilestones

Week1:Setup&FeatureMatching.
Setupyourprojectenvironment,collectyourfullimage
dataset,andimplementascripttondandvisualizelteredfeaturematchesbetweentwoimages.

Week2:Two-ViewReconstruction.
ImplementthefullpipelinetocomputetheEssentialmatrix,
recovercamerapose,andtriangulate3Dpointsfromanimagepair.Yoursubmissionisascript
thatoutputsavalid`.ply`pointcloud.

Week3:Multi-ViewSfM&Renement.
Extendyourpipelinetoincrementallyaddyourfull
imagesequenceusingPnP.Afterobservingthedrift,applyarenementstep.Submitarened
multi-viewpointcloud.

Week4:InteractiveVisualization.
Buildthe'Photosynth-style'virtualtourusingagraphics
librarylikeThree.js.Theviewermustallownavigationbetweencameraposeswithsmooth,ani-
matedtransitions.Yoursubmissionisafunctionalprototypeofthisviewer.

Week5:FinalizeandSubmit.
Completeandformatallyourworking.Submitareportofyour
workalongwithcompletecodeasperinstructions.Youmaybeaskedtoexplainyourworkings
toaTAorinstructor
FinalSubmission
YournalsubmissionwillbeasinglePDFreportof4-5pages.Thereportmustdetailyourmethod-
ologyforeachphase,presentyourresults(includingvisualizationsoffeaturematches,pointclouds
3
before/afterrenement,andyournaltour),andincludeadiscussionofthechallengesandoutcomes.
Theabstractofyourreportmustcontainasingle,clickablelinktothepublicGitHubrepository
containingyourproject.
Thisrepositoryrepresentsyourfullsubmissionandmustcontainallsource
code,ashortdemonstrationvideo(2-3minutes)ofyourinteractivetour,theimagedatasetyouused,and
acomprehensive`README.md`lewithclearinstructionsforrunningyourentirepipeline.
4